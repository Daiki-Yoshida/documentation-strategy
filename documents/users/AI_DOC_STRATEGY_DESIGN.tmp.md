# AIエージェント向けドキュメント管理戦略 - 設計資料

> **本ファイルについて**
> 
> これは「AIエージェント最優先のドキュメント管理戦略」を制作するための設計資料です。
> 実際のドキュメント管理戦略ドキュメントの作成に必要な情報を整理・検討するための
> 作業用ファイルです。

# シンプルなAIエージェント・ドキュメント戦術

## 核心原則（3つだけ）
1. **AIエージェント最優先**
   - 人間の可読性 < エージェントの効率性
   - トークン消費最小化
   - 認知負荷軽減

2. **情報の一元化**
   - 重複情報の排除
   - 単一真実源（SSOT）

3. **汎用性**
   - 単一プロジェクトでも階層プロジェクトでも使える
   - 規模に関係なく機能する
   - **適用対象**: AIエージェントを使用するプロジェクト（規模不問）

## 基本構造（マルチエージェント対応）

```
プロジェクト/
├── CLAUDE.md          # Claude専用指示・設定（≤200トークン）
├── GEMINI.md          # Gemini専用指示・設定（≤200トークン）
├── README.md          # 人間用の最小限説明
├── documents/         # 詳細情報（必要な時だけ読む）
│   ├── PROJECT.md     # プロジェクト説明（≤800トークン）
│   ├── context.md     # プロジェクト背景・制約（例）
│   ├── workflows.md   # 作業手順（例）
│   └── specs.md       # 技術仕様（例）
│   └── [プロジェクト固有のファイル群]
└── [ソースコード]
```

## 階層化が必要な時（オブジェクト指向設計原則）

```
親プロジェクト/
├── CLAUDE.md          # Claude専用指示・設定
├── GEMINI.md          # Gemini専用指示・設定
├── README.md          # 人間用
├── documents/
│   ├── PROJECT.md     # 親プロジェクト説明
│   └── children.md    # 子プロジェクト一覧・管理
├── 子プロジェクトA/
│   ├── CLAUDE.md      # 完全独立管理
│   ├── GEMINI.md      # 完全独立管理
│   └── documents/
│       └── PROJECT.md # 子プロジェクト説明（親を知らない）
└── 子プロジェクトB/
    ├── CLAUDE.md      # 完全独立管理
    ├── GEMINI.md      # 完全独立管理
    └── documents/
        └── PROJECT.md # 子プロジェクト説明（親を知らない）
```

### 階層化設計原則
- **子プロジェクトの独立性**: 親プロジェクトを知らずに完全に独立動作
- **親プロジェクトの包含責任**: 子プロジェクトの情報を全て把握・管理
- **情報の流れ**: 親→子（一方向）、子から親への直接参照なし
- **外部参照**: 必要な場合のみ、外部プロジェクト参照として親情報にアクセス
- **カプセル化**: 子プロジェクトは親の実装詳細を知らない

## ファイル形式の統一基準

### AIエージェント効率最優先の形式選定
- **基本方針**: 人間の可読性を完全に無視し、AIエージェントの処理効率を最優先
- **推奨形式**: Markdown（.md）をベースとし、構造化が必要な部分でYAMLを埋め込み
- **処理効率**: AIエージェントが最も効率的に解析・処理できる形式を選択

### 形式別使い分け基準
- **エージェント.md**: YAMLブロックを活用した構造化Markdown（現在の実装例の形式）
- **PROJECT.md**: Markdownをベースとし、必要に応じてYAMLセクションを含む
- **documents/内ファイル**: プロジェクトの性質に応じてMarkdown/YAML/JSONを柔軟に選択
- **README.md**: 標準的なMarkdown（人間向けのため例外的に可読性考慮）

### 形式選択の指針
1. **構造化データ**: YAML（設定、メタデータ、リスト）
2. **説明文**: Markdown（手順、解説、ドキュメント）
3. **API仕様**: JSON（OpenAPI、設定ファイル）
4. **混在**: Markdown + YAMLブロック（最も柔軟で効率的）

## documents/内のファイル構成の原則

### 柔軟なファイル構成
- **PROJECT.md**: 必須（プロジェクト説明・ルーティング役）
- **その他のファイル**: プロジェクトごとにユニークな構成
- **例示ファイル**: `context.md`、`workflows.md`、`specs.md`等は参考例

### 参照方法の使い分け
- **エージェント.mdでの参照**: 最重要・頻繁に使用するファイル
- **PROJECT.mdでの参照**: 通常の詳細情報ファイル
- **段階的誘導**: エージェント.md → PROJECT.md → 個別ファイル

### ルーティング戦略
- PROJECT.mdでdocuments/内ファイルへの適切な誘導を行う
- タスク・状況に応じた参照先の明示
- AIエージェントの迷子防止

## 情報重複を避ける仕組み

### 各ファイルの役割定義

#### PROJECT.md（プロジェクト説明）
- プロジェクト概要・目的
- 技術スタック・アーキテクチャ
- 制約・要件・ビジネスルール
- 現在の状態・進捗状況
- トークン制限≤800（AIエージェントが一度に処理できる最適サイズ）

#### エージェント.md（AI専用指示・設定）
**エントリーポイントとしての重要性を考慮した設計**

**必須情報（優先度：高）**
- 各AIエージェントの役割・責任範囲
- 即座に実行可能な具体的な行動指針
- 重要な制約事項・禁止事項

**ルーティング情報（優先度：高）**
- `documents/PROJECT.md`への参照指示
- タスクに応じた他ドキュメントへの誘導
- 段階的な情報取得のガイドライン

**効率性配慮（優先度：中）**
- 頻繁に使用する情報の直接記載
- コスト最適化のための処理指針
- 不要な処理を避けるための判断基準

**懸念点への対応**
- トークン制限内での情報密度最大化
- 他ドキュメントを読まない場合の対策
- 初回アクセス時の必要最小限情報の提供

#### README.md（対人向け資料）
- 人間が理解するための基本情報
- セットアップ・使用方法
- 貢献方法・連絡先
- プロジェクトの背景・意義
- トークン制限なし（人間向けの詳細説明可能）

### 実装例

```yaml
# PROJECT.md - プロジェクト説明（全AI共通参照）
project: "ユーザー管理API"
status: "開発中"
priority: "高"
tech_stack: "TypeScript + Express + PostgreSQL"
architecture: "REST API + MVC パターン"
constraints:
  - "テストカバレッジ80%以上"
  - "API仕様はOpenAPI準拠"
  - "セキュリティ要件厳格（OAuth2.0必須）"
current_phase: "MVP実装"

# CLAUDE.md - Claude専用指示・設定（≤200トークン）

## 必須情報（優先度：高）
role: "メイン開発者"
constraints:
  - "テスト駆動開発必須"
  - "型安全性重視（any禁止）"
  - "プロジェクトに変更を加えた場合は変更点に関連するドキュメントも適切に変更すること"
  - "英語で思考したり中途報告などをして、最終報告の時だけ日本語で報告すること"
  - "コードやドキュメントの変更を加える場合、ユーザーに最後報告をした後gitでcommitしますか？と聞いてyesならgitcommitするように"
emergency_action: "不明な場合は実装を停止し、確認を求める"

## ルーティング情報（優先度：高）
primary_ref: "documents/PROJECT.md（プロジェクト詳細）"
task_routing:
  - "実装前: documents/PROJECT.md確認"
  - "仕様不明: documents/specs.md参照"
  - "テスト関連: documents/workflows.md参照"

## 効率性配慮（優先度：中）
focus_files: ["src/**/*.ts", "tests/**/*.test.ts"]
current_priority: "API エンドポイントの実装"

# GEMINI.md - Gemini専用指示・設定（≤200トークン）
# 上記CLAUDE.mdの構造を参考に、各エージェントが独自にチューニング

# README.md - 対人向け資料
title: "ユーザー管理API"
description: "セキュアで高性能なユーザー管理システムのバックエンドAPI"
setup:
  - "Node.js 18+ をインストール"
  - "npm install でdependencies をインストール"
  - "環境変数を .env に設定"
  - "npm run dev で開発サーバー起動"
contact: "プロジェクト責任者: [担当者名]"
```

### 情報の優先順位
1. **[AI名].md**: 各AI専用指示・設定（ルートディレクトリ）
2. **documents/PROJECT.md**: プロジェクト説明（全AI共通参照）
3. **documents/**: 詳細情報（共通）
4. **README.md**: 人間用